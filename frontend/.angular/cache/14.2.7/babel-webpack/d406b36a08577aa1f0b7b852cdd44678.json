{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/auth.service\";\nexport let ManageEmployeesComponent = /*#__PURE__*/(() => {\n  class ManageEmployeesComponent {\n    constructor(_api, _router, _auth) {\n      this._api = _api;\n      this._router = _router;\n      this._auth = _auth;\n      this.isLogin = false;\n      this.isAdmin = false;\n      this.buttonIds = [];\n      this.isUserLogin();\n      this.isAdminUser();\n    }\n\n    isUserLogin() {\n      if (this._auth.getUserDetails() != null) {\n        this.isLogin = true;\n        this.renderAllEmployees();\n      } else {\n        this._router.navigate(['login']);\n      }\n    }\n\n    isAdminUser() {\n      if (this._auth.getAdminStatus() == '1') {\n        this.isAdmin = true;\n      }\n    }\n\n    renderAllEmployees() {\n      console.log('render all employees');\n\n      this._api.getTypeRequest('user/get-all-users').subscribe(res => {\n        console.log(res);\n\n        if (res.status) {\n          for (let i = 0; i < res.data.length; i++) {\n            let employeeId = res.data[i].employeeId;\n            let firstName = res.data[i].firstname;\n            let lastName = res.data[i].lastname;\n            this.buttonIds.push(employeeId);\n            let html = `\n            <tr class=\"text-center\">\n              <td>${firstName} ${lastName}</td>\n              <td><button id=\"delete${employeeId}\" class=\"btn btn-danger btn-sm\">Delete</button></td>\n              <td><button id=\"adminAccess${employeeId}\" class=\"btn btn-primary btn-sm\">Give Admin Access</button></td>\n            </tr>`;\n            $('#employees').append(html);\n          }\n        }\n      });\n    }\n\n    ngAfterViewChecked() {\n      for (let i = 0; i < this.buttonIds.length; i++) {\n        let id = this.buttonIds[i];\n        $(`#delete${id}`).click(() => {\n          console.log('delete button clicked');\n\n          this._api.postTypeRequest('user/delete-user', {\n            employeeId: id\n          }).subscribe(res => {\n            console.log(res);\n\n            if (res.status) {\n              window.location.reload();\n            } else {\n              alert(\"Error deleting employee\");\n            }\n          });\n        });\n        $(`#adminAccess${id}`).click(() => {\n          console.log('give admin access button clicked');\n\n          this._api.postTypeRequest('user/give-admin-access', {\n            employeeId: id\n          }).subscribe(res => {\n            console.log(res);\n\n            if (res.status) {\n              window.location.reload();\n            } else {\n              alert(\"Error occurred in promoting employee to admin\");\n            }\n          });\n        });\n      }\n    }\n\n  }\n\n  ManageEmployeesComponent.ɵfac = function ManageEmployeesComponent_Factory(t) {\n    return new (t || ManageEmployeesComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n\n  ManageEmployeesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ManageEmployeesComponent,\n    selectors: [[\"app-manage-employees\"]],\n    decls: 13,\n    vars: 0,\n    consts: [[\"id\", \"manageEmployeesDiv\"], [1, \"text-center\", \"py-5\"], [\"id\", \"employeesTable\"], [1, \"table\"], [1, \"text-center\"], [\"id\", \"employees\"]],\n    template: function ManageEmployeesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Manage Employees\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\")(4, \"div\", 2)(5, \"table\", 3)(6, \"thead\")(7, \"tr\")(8, \"th\", 4);\n        i0.ɵɵtext(9, \"Employees\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"th\")(11, \"th\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(12, \"tbody\", 5);\n        i0.ɵɵelementEnd()()()();\n      }\n    },\n    styles: [\"#manageEmployeesDiv[_ngcontent-%COMP%]{color:#fff;margin-left:25%;margin-right:25%}#manageEmployeesDiv[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{color:#fff}\"]\n  });\n  return ManageEmployeesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}